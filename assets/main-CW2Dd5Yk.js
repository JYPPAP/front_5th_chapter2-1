(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}})();const s=[{id:"p1",name:"상품1",price:1e4,stock:50},{id:"p2",name:"상품2",price:2e4,stock:30},{id:"p3",name:"상품3",price:3e4,stock:20},{id:"p4",name:"상품4",price:15e3,stock:0},{id:"p5",name:"상품5",price:25e3,stock:10}];function u(t,...e){const o=t.reduce((r,c,i)=>r+c+(e[i]||""),""),n=document.createElement("div");return n.innerHTML=o.trim(),n.firstChild}function B(t,...e){return e.forEach(o=>{o&&t.appendChild(o)}),t}function U(){return u`<div class="bg-gray-100 p-8"></div>`}function N(){return u`<div class="max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-2xl p-8"></div>`}function Q(t="장바구니"){return u`<h1 class="text-2xl font-bold mb-4">${t}</h1>`}function F(){return u`<ul id="cart-items"></ul>`}function H(){return u`<div id="cart-total" class="text-xl font-bold my-4"></div>`}function W(){return u`<select id="product-select" class="border rounded p-2 mr-2"></select>`}function K(t="추가"){return u`<button id="add-to-cart" class="bg-blue-500 text-white px-4 py-2 rounded">${t}</button>`}function j(){return u`<div id="stock-status" class="text-sm text-gray-500 mt-2"></div>`}function V(){const t=Q(),e=F(),o=H(),n=W(),r=K(),c=j(),i=N();B(i,t,e,o,n,r,c);const a=U();return a.appendChild(i),{container:a,wrapper:i,title:t,cartList:e,totalDisplay:o,productSelect:n,addButton:r,stockInfoDisplay:c}}function v(){return new Date().getDay()===2}function Y(t){return Math.round(t)+"원"}function z(t){return(t*100).toFixed(1)+"%"}const G={p1:.1,p2:.15,p3:.2,p4:.05,p5:.25},I=.25,J=30,L=.1,S=.2,D=.05,X=.001,Z=3e4,tt=6e4;function et(t,e=1){return u`
    <li id="${t.id}" class="flex justify-between items-center mb-2">
      <span>${t.name} - ${t.price}원 x ${e}</span>
      <div>
        <button class="quantity-change bg-blue-500 text-white px-2 py-1 rounded mr-1" data-product-id="${t.id}" data-change="-1">-</button>
        <button class="quantity-change bg-blue-500 text-white px-2 py-1 rounded mr-1" data-product-id="${t.id}" data-change="1">+</button>
        <button class="remove-item bg-red-500 text-white px-2 py-1 rounded" data-product-id="${t.id}">삭제</button>
      </div>
    </li>
  `}function nt(t,e,o){if(t.textContent=`총액: ${Y(e)}`,o>0){const n=u`
      <span class="text-green-500 ml-2">(${z(o)} 할인 적용)</span>
    `;t.appendChild(n)}}function ot(t,e){const o=Math.floor(e*X);let n=document.getElementById("loyalty-points");return n||(n=u`
      <span id="loyalty-points" class="text-blue-500 ml-2"></span>
    `,t.appendChild(n)),n.textContent=`(포인트: ${o})`,o}function rt(t,e,o){var c;const n=t.target,r=(c=n==null?void 0:n.dataset)==null?void 0:c.productId;if(r)if(n.classList.contains("quantity-change")){const i=parseInt(n.dataset.change);e(r,i)}else n.classList.contains("remove-item")&&o(r)}function f(t,e){t.innerHTML="",e.forEach(o=>{const n=u`<option value="${o.id}" ${o.stock===0?"disabled":""}>${o.name} - ${o.price}원</option>`;t.appendChild(n)})}function ct(t,e){let o="";e.forEach(n=>{n.stock<5&&(o+=`${n.name}: ${n.stock>0?`재고 부족 (${n.stock}개 남음)`:"품절"}
`)}),t.textContent=o}function m(t,e){return e.find(o=>o.id===t)}function P(t,e){const{product:o,discountRate:n}=t;alert(`번개세일! ${o.name}이(가) ${n*100}% 할인 중입니다!`),e()}function b(t,e){const{product:o,discountRate:n}=t;alert(`${o.name}은(는) 어떠세요? 지금 구매하시면 ${n*100}% 추가 할인!`),e()}function it(t,e){return e<10?0:G[t]||0}function at(t){return t>=J}function st(t,e){let o=0;return Array.from(t.children).forEach(n=>{const r=m(n.id,e);if(!r)return;const c=parseInt(n.querySelector("span").textContent.split("x ")[1]),i=r.price*c,a=it(n.id,c);o+=i*(1-a)}),o}function ut(t){return v()?t*(1-L):t}function lt(t,e,o,n){if(o===0)return{finalAmount:0,discountRate:0};const r=st(t,e);let c=r;const i=o-r;let a=i/o||0;return at(n)&&r*I>i&&(c=o*(1-I),a=I),v()&&(c=ut(c),a=Math.max(a,L)),{finalAmount:c,discountRate:a}}function dt(t,e){let o=0,n=0,r=0;Array.from(t.children).forEach(a=>{const C=m(a.id,e);if(!C)return;const E=parseInt(a.querySelector("span").textContent.split("x ")[1]),q=C.price*E;n+=E,r+=q});const{finalAmount:c,discountRate:i}=lt(t,e,r,n);return o=c,{totalAmount:o,totalItemCount:n,subtotal:r,discountRate:i}}function ft(t,e,o){const n=m(t,o);if(!n||n.stock<=0)return null;const r=document.getElementById(n.id);if(r){const c=parseInt(r.querySelector("span").textContent.split("x ")[1]),i=c+1;if(i<=n.stock+c)r.querySelector("span").textContent=`${n.name} - ${n.price}원 x ${i}`,n.stock--;else return alert("재고가 부족합니다."),null}else{const c=et(n);e.appendChild(c),n.stock--}return t}function pt(t,e,o,n){const r=document.getElementById(t),c=m(t,n);if(!r||!c)return!1;const i=parseInt(r.querySelector("span").textContent.split("x ")[1]),a=i+e;return a<=0?R(t,o,n):e>0&&a>i+c.stock?(alert("재고가 부족합니다."),!1):(r.querySelector("span").textContent=`${r.querySelector("span").textContent.split("x ")[0]}x ${a}`,c.stock-=e,!0)}function R(t,e,o){const n=document.getElementById(t),r=m(t,o);if(!n||!r)return!1;const c=parseInt(n.querySelector("span").textContent.split("x ")[1]);return r.stock+=c,n.remove(),!0}const l={flashSale:[],recommendedProduct:[]};let h=null,y=null;function A(t,e){l[t]||(l[t]=[]),l[t].push(e)}function $(t,e){l[t]&&(l[t]=l[t].filter(o=>o!==e))}function O(t,e){l[t]&&l[t].forEach(o=>{o(e)})}function mt(t){const e=Math.random()*1e4;setTimeout(()=>{h=setInterval(()=>{ht(t)},Z)},e)}function ht(t){const e=Math.floor(Math.random()*t.length),o=t[e];Math.random()<.3&&o.stock>0&&(o.price=Math.round(o.price*(1-S)),O("flashSale",{product:o,discountRate:S}))}function yt(t,e){const o=Math.random()*2e4;setTimeout(()=>{y=setInterval(()=>{const n=e.current;n&&xt(t,n)},tt)},o)}function xt(t,e){const o=t.filter(r=>r.id!==e&&r.stock>0),n=o.length>0?o[Math.floor(Math.random()*o.length)]:null;n&&(n.price=Math.round(n.price*(1-D)),O("recommendedProduct",{product:n,discountRate:D}))}function Ct(){h&&(clearInterval(h),h=null),y&&(clearInterval(y),y=null),Object.keys(l).forEach(t=>{l[t]=[]})}function It(t,e){return mt(t),yt(t,e),Ct}let d,M,p,g,_,k=null,T=0;const w={get current(){return k},set current(t){k=t}};function Tt(){A("flashSale",e=>{P(e,()=>f(d,s))}),A("recommendedProduct",e=>{b(e,()=>f(d,s))});const t=It(s,w);return()=>{$("flashSale",P),$("recommendedProduct",b),t()}}function x(){const{totalAmount:t,discountRate:e}=dt(p,s);T=t,nt(g,T,e),ct(_,s),ot(g,T)}function gt(){const t=d.value;ft(t,p,s)&&(w.current=t,x(),f(d,s))}function Et(t,e){pt(t,e,p,s)&&(x(),f(d,s))}function St(t){R(t,p,s)&&(x(),f(d,s))}function Dt(t){rt(t,Et,St)}function Pt(){M.addEventListener("click",gt),p.addEventListener("click",Dt)}function bt(){const t=document.getElementById("app"),e=V();p=e.cartList,g=e.totalDisplay,d=e.productSelect,M=e.addButton,_=e.stockInfoDisplay,t.appendChild(e.container),f(d,s),x(),Pt(),Tt()}bt();
